<!DOCTYPE html>
<head>
  <title>Lambdoma online keyboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Caprasimo&display=swap" rel="stylesheet">
  <style>
    html * > {
      font-size: 0.75;
      box-sizing: border-box;
    }
    body {
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f4f4f9;
      color: #2f4550;
      padding: 0;
      margin: 0;
    }
    a {
      color: #2f4550;
    }
    a:hover,
    a:focus {
      text-decoration: none;
    }
    h1 {
      font-family: "Caprasimo", serif;
      font-size: 3.2rem;
      text-align: center;
      margin: 0;
    }
    .sub-heading {
      display: block;
      font-size: 1.3rem;
    }
    :root {
      --button-size: 52px;
      --transition-period: 200ms;
      --grid-size: 8;
      --spacing: 16px;
      --max-width: 768px;
      --dark-green: #2f4550;
      --mid-green: #586f7c;
      --light-green: #b8dbd9;
    }
    header {
      background-color: var(--dark-green);
      color: white;
    }
    header p {
      margin-bottom: 0;
    }
    .wrapper {
      /* margin: 0 auto;
      max-width: var(--max-width); */
    }
    main {
      display: flex;
      flex-direction: row;
      margin: 0 auto;
      justify-content: center;
      padding: var(--spacing) 0;
    }

    .keyboard-form {
      background-color: #b8dbd9;
      /* max-width: var(--max-width); */
      margin: 0;
      padding: var(--spacing);
      display: flex;
      flex-direction: row;
      justify-content: center;
      gap: var(--spacing);
    }

    .keyboard-form__fieldset {
      width: fit-content;
    }

    .keyboard-form__submit {
      background-color: var(--dark-green);
      color: white;
      height: 1.8rem;
      border-radius: 0.3rem;
    }

    .keyboard-form__fieldset input {
      width: 60px;
      height: 1.4rem;
      border-radius: 0.3rem;
    }

    .keyboard-form__fieldset {
      display: inline-block;
    }

    .keyboard__column {
      flex-direction: column;
      width: var(--button-size);
    }

    .keyboard__button {
      width: var(--button-size);
      height: var(--button-size);
      border: 1px solid black;
      transition: background-color var(--transition-period) linear;
      position: relative;
    }

    .keyboard__button.green {
      background-color: #6cd9af;
    }

    .keyboard__button.yellow {
      background-color: #c2d951;
    }

    .keyboard__button.blue {
      background-color: #6a75dd;
    }

    .keyboard__button.pale_blue {
      background-color: #6e9ad4;
    }

    .keyboard__button.violet {
      background-color: #ca7efd;
    }

    .keyboard__button.indigo {
      background-color: #b062e4;
    }
    
    .keyboard__button.deep_purple {
      background-color: #9e5de8;
    }

    .keyboard__button.purple {
      background-color: #9d71f0;
    }

    .keyboard__button.light_purple {
      background-color: #bca1ed;
    }

    .keyboard__button.red {
      background-color: #d86a80;
    }

    .keyboard__button.pink {
      background-color: #e74fdf;
    }

    .keyboard__button.lilac {
      background-color: #65b4f8;
    }

    .keyboard__button.orange {
      background-color: #d2b534;
    }

    .keyboard__button.beige {
      background-color: #c1bf81;
    }

    .keyboard__button.grass {
      background-color: #9dc181;
    }

    .keyboard__button.grey {
      background-color: #c8cfcc;
    }

    .keyboard__button:hover {
      cursor: pointer;
      background-color: bisque;
      transition: background-color var(--transition-period) linear;
    }

    .keyboard__button:after {
      width: 100%;
      height: 100%;
      background-color: transparent;
      display: flex;
      content: " ";
      position: absolute;
      z-index: 2;
      top: 0;
      left: 0;
    }

    .keyboard__button:hover:after,
    .keyboard__button:active:after,
    .keyboard__button[data-playing="true"]:after {
      background-color: rgba(255, 255, 255, 0.4);
      transition: background-color var(--transition-period) linear;
    }

    /* [data-ratio-string]::before {
      content: attr(data-ratio-string);
      z-index: 3;
      position: absolute;
      top: 0;
      left: 0;
    } */

    .keyboard__button::before {
      content: attr(data-ratio-string);
      z-index: 3;
      position: absolute;
      top: 0;
      left: 0;
      display: none;
    }

    .keyboard__button:hover::before {
      display: block;
    }
    
    .keyboard__button__text {
      pointer-events: none;
    }

    .keyboard__button[data-playing="true"] {
      background-color: coral;
      transition: background-color var(--transition-period) linear;
    }

    @media screen and (min-width: 580px) {
      main {
        transform: rotate(45deg) translate(20%, 15%);
        width: calc(var(--button-size) * var(--grid-size));
      }

      .keyboard__button__text {
        rotate: -45deg;
      }

      .keyboard-form--footer {
        margin-top: 180px;
        position: relative;
        z-index: 2;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Lambdoma Matrix <span class="sub-heading">Harmanically consonant Keyboard</span></h1>
    <p>Barbara Hero's matrix of wholenumber ratios organises the harmonic series into a unique keyboard. 
    This online version aims to reproduce her innovative work and make it accessible to anyone.
    Best enjoyed on larger screens. <a href="https://www.lambdoma.com/" target="_blank">Read about the original, physical keyboard here.</a></p>
  </header>
  <div class="wrapper">
  <form id="keyboard-settings-form" class="keyboard-form">
    <div class="keyboard-form__fieldset">
      <label for="input-base-frequency" class="keyboard-form__label">Base Frequency</label>
      <input name="base-frequency-input" type="number" min="128" max="480" id="input-base-frequency">
      <button id="keyboard-settings-submit" class="keyboard-form__submit">Submit</button> 
    </div>
    <button id="stop" class="keyboard-form__submit">Stop All</button>
  </form>
  <main id="main">
  </main>
  <form id="keyboard-colours-form" class="keyboard-form keyboard-form--footer">
    <div class="keyboard-form__fieldset">
      <label for="keyboard-colours-select" class="keyboard-form__label">Colour Scheme</label>
      <select id="keyboard-colours-select" name="keyboard-colours-select">
      </select>
    </div>
    <div class="keyboard-form__fieldset">
      <label for="input-grid-size" class="keyboard-form__label">grid size</label>
      <select name="grid-size-input" type="number" id="input-grid-size">
        <option>8 x 8</option>
        <option>16 x 16</option>
        <option>20 x 20</option>
      </select>
      <!-- <button id="keyboard-settings-submit" class="keyboard-form__submit">Submit</button>  -->
    </div>
  </form>
  <script type="module" src="./src/index.js"></script>
</body>